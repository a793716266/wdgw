/**
 * 开班班级信息
 * course_name：课程名称
 * class_type：班级类型
 * class_name：班级名称
 * class_state：班级状态
 */

layui.use('layer', function(){ //独立版的layer无需执行这一句
  var $ = layui.jquery, 
  layer = layui.layer; //独立版的layer无需执行这一句
})

Vue.component("class-item", {
	props: ['clas'],
	template: `
		<li>
			<div class="liboxOne">{{ clas.ctype }}</div>
			<div class="liboxTwo">{{ clas.classState }}</div>
			<div class="liboxTwo">{{ clas.classTypeName }}{{ clas.classNumber}}</div>
			<div @click="pickClass(this,clas.reservsState)"  :class="'liboxLast'+(clas.reservsState=='0'?' active':'')">{{ clas.reservsState==0?'抢名额':'已满开班' }}</div>
		</li> 
  			`
  			
  		,methods:{
  			//报班信息点击事件
  			pickClass:function(obj,data){
  				var status=document.getElementById("status").innerText;
				if(status == '' ){
					  window.location = "wd/toLogin.do";
					  return false;
				}else{
					//结束方法
					var isOver = true;
					//ajax验证学员是否已经申请抢名额 
					$.ajax({
						url:"wd/checkApply.do",
						type:"post",
						dataType:"json",
						data:{},
						success:function(data){
							if(data.findPhone >=1){
								 layer.open({
								        type: 1
								        ,content: '<div style="padding: 20px 100px;">'+ "您的名额正在申请中..." +'</div>'
								        ,btn: '关闭'
								        ,yes: function(){
								          layer.closeAll();
								        }
								      });
								isOver = false;
								return;
							}
						},
						async:false
					})
					if(data == 0 && isOver){
						var nowClas = this.clas;
						var number = nowClas.classNumber; 
						var typeName = nowClas.classTypeName;
						var ctype = nowClas.ctype;
						layer.confirm('确定申请名额？', {
						    btn: ['确定', '取消']
						}, function () {
							//ajax申请人报名信息存储 
							$.ajax({
								url:"wd/clas.do",
								type:"post",
								dataType:"json",
								data:{typeName:typeName,number:number,ctype:ctype},
								success:function(data){
									if(data.msg == 1){
										layer.open({
									        type: 1
									        ,content: '<div style="padding: 20px 100px;">'+ "申请提交成功... "+'</div>'
									        ,btn: '关闭'
									        ,yes: function(){
									          layer.closeAll();
									        }
									      });
									}else{
										layer.open({
									        type: 1
									        ,content: '<div style="padding: 20px 100px;">'+ "申请提交失败！" +'</div>'
									        ,btn: '关闭'
									        ,yes: function(){
									          layer.closeAll();
									        }
									      });
									}
								}
							})
						}, function () {

						});
					}
				}
  			}
  		}
})

/**
 * 流程步骤,奇数步骤
 *	原形盒子在左，图片在右 
 * num：流程步骤编号
 * <slot name="content">content:为本内容
 * <slot name="title">title:标题
 */
 /**
  * sort 页面排序
  * describetext 描述文本
  * image1 图片1
  * image2 图片2
  * image3 图片3
  * textdescribe 标题描述
  * titleimage 标题图片
  * 
  * */
  
  
Vue.component("rightbox-item", {
	props:["sort","describetext","image1","image2","image3","textdescribe","titleimage"],
	template: `
  			<div class="big-content-zuo" >
				<div class="baoyuanbox">
					<div class="yuanbox" :style="titleimage?'background: url('+titleimage+') center center no-repeat white;':''"></div>
				</div>
				<div class="rightbox">
					<h2 class="rightbox-num"> STEP 0{{sort}}</h2>
					<h2 >{{textdescribe}}</h2>
					<p class="right-content" >
						{{describetext}}
					</p>
				</div>
				<div class="edgebox">
					<ul class="ul">
						<li :style="image1?'background-image: url('+image1+');':''"></li>
						<li :style="image2?'background-image: url('+image2+');':''"></li>
						<li :style="image3?'background-image: url('+image3+');':''"></li>
					</ul>
				</div>
			</div>
  			`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
});





Vue.component("leftbox-item", {
	props:["sort","describetext","image1","image2","image3","textdescribe","titleimage"],
	template: `
  			<div class="big-content-you">
				<div class="content-you-edgebox">
					<ul class="ul">
						<li :style="image1?'background-image: url('+image1+');':''"></li>
						<li :style="image2?'background-image: url('+image2+');':''"></li>
						<li :style="image3?'background-image: url('+image3+');':''"></li>
					</ul>
				</div>
				<div class="content-you-middlebox">
						<h2 class="rightbox-num"> STEP 0{{sort}}</h2>
					<h2 >{{textdescribe}}</h2>
					<p class="right-content" >
						{{describetext}}
					</p>
				</div>
				<!--原形盒子-->
				<div class="content-you-wai">
					<div class="you-wai-bai"></div>
         <div class="you-waiyuan" :style="titleimage?'background: url('+titleimage+')center center no-repeat white;':''"></div>
				</div>
			</div>
  			`
})